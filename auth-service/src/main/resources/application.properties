# ============================================
# APPLICATION SETTINGS
# ============================================
# This is the name of our microservice
# Used by Spring Cloud for service discovery (we'll use this in later weeks)
spring.application.name=auth-service

# The port our application runs on
# Later, each microservice will have its own port (auth=8081, patient=8082, etc.)
server.port=8081


# ============================================
# DATABASE CONFIGURATION (H2 In-Memory)
# ============================================
# 
# H2 is an in-memory database perfect for development:
#   - No installation required
#   - Starts instantly with your app
#   - Data is stored in memory (fast!)
#   - Has a web console to view/edit data
#
# ⚠️ IMPORTANT: Data is LOST when the app stops!
# For persistent data, switch to PostgreSQL in production.
# 
# ------------------------------------------
# H2 Connection URL Explained
# ------------------------------------------
#   jdbc:h2:mem:auth_db
#   ├── jdbc:h2  = H2 database driver
#   ├── mem:     = Store in memory (not file)
#   └── auth_db  = Database name
#
#   DB_CLOSE_DELAY=-1 = Keep database alive while JVM runs
#   DB_CLOSE_ON_EXIT=FALSE = Don't close when last connection closes
#
spring.datasource.url=jdbc:h2:mem:auth_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# ------------------------------------------
# H2 Web Console
# ------------------------------------------
# Enables a web UI to view and query your database!
# Access at: http://localhost:8081/h2-console
#
# Login with:
#   JDBC URL: jdbc:h2:mem:auth_db
#   Username: sa
#   Password: (leave empty)
#
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false


# ============================================
# JPA / HIBERNATE SETTINGS
# ============================================

# ------------------------------------------
# spring.jpa.hibernate.ddl-auto - Schema Management
# ------------------------------------------
# This tells Hibernate what to do with database tables on startup:
#
#   none    = Do nothing (production setting - you manage schema manually)
#   validate= Check that entities match existing tables (fails if mismatch)
#   update  = Update tables to match entities (SAFE for development)
#   create  = Drop all tables and recreate on each startup (loses data!)
#   create-drop = Like create, but also drops tables when app stops
#
# For H2 in development, "create-drop" is fine since data is in memory anyway.
# For PostgreSQL in production, use "validate" or "none".
spring.jpa.hibernate.ddl-auto=create-drop

# ------------------------------------------
# spring.jpa.show-sql - SQL Logging
# ------------------------------------------
# When true, prints every SQL statement Hibernate executes to the console.
# EXTREMELY useful for learning and debugging!
# Turn off in production for performance.
spring.jpa.show-sql=true

# ------------------------------------------
# spring.jpa.properties.hibernate.format_sql
# ------------------------------------------
# When true, formats the SQL output to be readable (with line breaks and indentation)
spring.jpa.properties.hibernate.format_sql=true

# ------------------------------------------
# H2 Dialect
# ------------------------------------------
# Tells Hibernate to generate H2-compatible SQL
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect


# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log levels: TRACE < DEBUG < INFO < WARN < ERROR

# Show what Spring Security is doing (very helpful for debugging auth issues)
logging.level.org.springframework.security=DEBUG

# Show SQL parameter values (the ? in prepared statements)
# Without this, you'd see: ... where email=?
# With this, you'd see: ... where email='john@example.com'
logging.level.org.hibernate.orm.jdbc.bind=TRACE

# General app logging
logging.level.com.ganainy.authservice=DEBUG


# ============================================
# JWT CONFIGURATION
# ============================================
# 
# JWT (JSON Web Token) settings for authentication.
#
# ------------------------------------------
# SECRET KEY
# ------------------------------------------
# The secret key used to sign JWT tokens.
#
# ⚠️ SECURITY WARNING:
#   - In production, use environment variables: ${JWT_SECRET}
#   - Never commit real secrets to git!
#   - Key should be at least 256 bits (32 bytes) for HS256
#   - Generate with: openssl rand -base64 32
#
# This base64-encoded key is for development only!
jwt.secret=dGhpc2lzYXZlcnlsb25nc2VjcmV0a2V5Zm9yand0dG9rZW5zaWduaW5nMTIzNDU2Nzg5MA==

# Token expiration time in milliseconds
# 1 hour = 3600000ms (for access tokens)
jwt.expiration=3600000

# Refresh token expiration (optional, for later)
# 7 days = 604800000ms
jwt.refresh-expiration=604800000


# ============================================
# POSTGRESQL CONFIGURATION (For Production)
# ============================================
# Uncomment these and comment out the H2 settings above for production:
#
# spring.datasource.url=jdbc:postgresql://localhost:5432/auth_db
# spring.datasource.username=postgres
# spring.datasource.password=postgres
# spring.datasource.driver-class-name=org.postgresql.Driver
# spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# spring.jpa.hibernate.ddl-auto=validate

